<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creates Page Layout Visualizations • ggpage</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Creates Page Layout Visualizations">
<meta property="og:description" content="Facilitates the creation of page layout
    visualizations in which words are represented as rectangles with sizes
    relating to the length of the words. Which then is divided in lines
    and pages for easy overview of up to quite large texts.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ggpage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/different-features.html">ggpage features</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/EmilHvitfeldt/ggpage">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="ggpage" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ggpage" class="anchor"></a>ggpage <img src="reference/figures/logo.png" align="right" height="139">
</h1></div>

<p><strong>ggpage</strong> is a package to create pagestyled visualizations of text based data. It uses ggplot2 and final returns are ggplot2 objects.</p>
<div id="version-0-2-0" class="section level2">
<h2 class="hasAnchor">
<a href="#version-0-2-0" class="anchor"></a>Version 0.2.0</h2>
<p>In this new version I have worked to include a lot of use cases that wasn’t available in the first version. These new elements are previewed in the vignette.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of <strong>ggpage</strong> from <a href="https://cran.r-project.org/">CRAN</a> with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"ggpage"</span>)</code></pre></div>
<p>or you can install the developmental version of <strong>ggpage</strong> from github with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"EmilHvitfeldt/ggpage"</span>)</code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>The package includes The Tinder-box by H.C. Andersen for examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggpage)

<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(tinderbox, <span class="dv">10</span>)
<span class="co">#&gt; # A tibble: 10 x 2</span>
<span class="co">#&gt;    text                                                        book        </span>
<span class="co">#&gt;    &lt;chr&gt;                                                       &lt;chr&gt;       </span>
<span class="co">#&gt;  1 "A soldier came marching along the high road: \"Left, righ… The tinder-…</span>
<span class="co">#&gt;  2 had his knapsack on his back, and a sword at his side; he … The tinder-…</span>
<span class="co">#&gt;  3 and was now returning home. As he walked on, he met a very… The tinder-…</span>
<span class="co">#&gt;  4 witch in the road. Her under-lip hung quite down on her br… The tinder-…</span>
<span class="co">#&gt;  5 "and said, \"Good evening, soldier; you have a very fine s… The tinder-…</span>
<span class="co">#&gt;  6 knapsack, and you are a real soldier; so you shall have as… The tinder-…</span>
<span class="co">#&gt;  7 "you like.\""                                               The tinder-…</span>
<span class="co">#&gt;  8 "\"Thank you, old witch,\" said the soldier."               The tinder-…</span>
<span class="co">#&gt;  9 "\"Do you see that large tree,\" said the witch, pointing … The tinder-…</span>
<span class="co">#&gt; 10 "beside them. \"Well, it is quite hollow inside, and you m… The tinder-…</span></code></pre></div>
<p>The basic workflow with <strong>ggpage</strong> is using either</p>
<ul>
<li>
<code>ggpage_quick</code> for a quick one function call plot or,</li>
<li>combining <code>ggpage_build</code> and <code>ggpage_plot</code> to do analysis (NLP for example) before the final plot is produced.</li>
</ul>
<p>For a simple demonstration we apply <code>ggpage_quick</code> to our <code>tinderbox</code> object. It is important that the data.frame that is used have the text in a column named “text”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/ggpage_quick.html">ggpage_quick</a></span>(tinderbox)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># Also pipeable</span>
<span class="co"># tinderbox %&gt;% ggpage_quick()</span></code></pre></div>
<p>The same result would be achieved by using</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tinderbox <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/ggpage_build.html">ggpage_build</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/ggpage_plot.html">ggpage_plot</a></span>()</code></pre></div>
<p>But this approach allows us to introduce more code between <code>ggpage_build</code> and <code>ggpage_plot</code> giving us multiple more ways to enhance the plots</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tinderbox <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/ggpage_build.html">ggpage_build</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">long_word =</span> stringr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stringr/topics/str_length">str_length</a></span>(word) <span class="op">&gt;</span><span class="st"> </span><span class="dv">8</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/ggpage_plot.html">ggpage_plot</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> long_word)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Longer words throughout The Tinder-box"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"grey70"</span>, <span class="st">"blue"</span>),
                    <span class="dt">labels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"8 or less"</span>, <span class="st">"9 or more"</span>),
                    <span class="dt">name =</span> <span class="st">"Word length"</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="700"></p>
<p>And it will work nicely with other tidyverse packages</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggpage)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(purrr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gganimate)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidytext)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(zoo)

prebuild &lt;-<span class="st"> </span>tinderbox <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/ggpage_build.html">ggpage_build</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/tidytext/topics/get_sentiments">get_sentiments</a></span>(<span class="st">"afinn"</span>), <span class="dt">by =</span> <span class="st">"word"</span>) 

midbuild &lt;-<span class="st"> </span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_df</a></span>(<span class="dt">.x =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">50</span> <span class="op">*</span><span class="st"> </span><span class="dv">10</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,
                   <span class="op">~</span><span class="st"> </span>prebuild <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                    </span><span class="kw">mutate</span>(<span class="dt">score =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/NA">is.na</a></span>(score), <span class="dv">0</span>, score), 
                           <span class="dt">score_smooth =</span> zoo<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/zoo/topics/rollmean">rollmean</a></span>(score, .x, <span class="dv">0</span>),
                           <span class="dt">score_smooth =</span> score_smooth <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">max</a></span>(score_smooth),
                           <span class="dt">rolls =</span> .x))

midbuild <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/ggpage_plot.html">ggpage_plot</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> score_smooth)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradient2</span>(<span class="dt">low =</span> <span class="st">"red"</span>, <span class="dt">high =</span> <span class="st">"blue"</span>, <span class="dt">mid =</span> <span class="st">"grey"</span>, <span class="dt">midpoint =</span> <span class="dv">0</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="st">"none"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Smoothed sentiment of The Tinder-box, rolling average of {round(frame_time)}"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/gganimate/topics/transition_time">transition_time</a></span>(rolls)</code></pre></div>
<p><img src="reference/figures/README-readmegif-1.gif"><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(paletteer)
sentiment_types &lt;-<span class="st"> </span>sentiments <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(lexicon <span class="op">==</span><span class="st"> "nrc"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">pull</span>(sentiment) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>()

prebuild &lt;-<span class="st"> </span><span class="kw"><a href="https://purrr.tidyverse.org/reference/imap.html">imap_dfr</a></span>(sentiment_types,
  <span class="op">~</span><span class="st"> </span><span class="kw"><a href="reference/ggpage_build.html">ggpage_build</a></span>(tinderbox) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/tidytext/topics/get_sentiments">get_sentiments</a></span>(<span class="st">"nrc"</span>), sentiment <span class="op">==</span><span class="st"> </span>.x), <span class="dt">by =</span> <span class="st">"word"</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sentiment_state =</span> .x,
           <span class="dt">score =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/NA">is.na</a></span>(sentiment)),
           <span class="dt">score_smooth =</span> zoo<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/zoo/topics/rollmean">rollmean</a></span>(score, <span class="dv">5</span>, <span class="dv">0</span>)))

prebuild <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/ggpage_plot.html">ggpage_plot</a></span>(<span class="kw">aes</span>(<span class="dt">fill =</span> score_smooth), <span class="dt">page.number =</span> <span class="st">"top-left"</span>) <span class="op">+</span>
<span class="st">  </span>paletteer<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/paletteer/topics/ggplot2-scales-continuous">scale_fill_paletteer_c</a></span>(viridis, cividis, <span class="dt">direction =</span> <span class="op">-</span><span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="st">"none"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/gganimate/topics/transition_states">transition_states</a></span>(
    sentiment_state,
    <span class="dt">transition_length =</span> <span class="dv">10</span>,
    <span class="dt">state_length =</span> <span class="dv">3</span>
    ) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Sections with a sentiment of {closest_state}</span><span class="ch">\n</span><span class="st">In H.C. Andersen's Tinderbox"</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.gif"><!-- --></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=ggpage">https://​cloud.r-project.org/​package=ggpage</a>
</li>
<li>Browse source code at <br><a href="https://github.com/EmilHvitfeldt/ggpage">https://​github.com/​EmilHvitfeldt/​ggpage</a>
</li>
<li>Report a bug at <br><a href="https://github.com/EmilHvitfeldt/ggpage/issues">https://​github.com/​EmilHvitfeldt/​ggpage/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Emil Hvitfeldt <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/EmilHvitfeldt/ggpage"><img src="https://travis-ci.org/EmilHvitfeldt/ggpage.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/EmilHvitfeldt/ggpage"><img src="https://ci.appveyor.com/api/projects/status/github/EmilHvitfeldt/ggpage?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/github/EmilHvitfeldt/ggpage?branch=master"><img src="https://codecov.io/gh/EmilHvitfeldt/ggpage/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://cran.r-project.org/package=ggpage"><img src="https://www.r-pkg.org/badges/version/ggpage" alt="CRAN status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Emil Hvitfeldt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
